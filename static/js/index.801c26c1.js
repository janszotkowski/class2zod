(()=>{"use strict";var e,t,s,n,a={204:function(e,t,s){var n=s(848),a=s(540),l=s(338),r=s(2);function i(e,t){let s=[],n=0,a=!1,l="",r="";for(let i=0;i<e.length;i++){let o=e[i];if(('"'===o||"'"===o)&&"\\"!==e[i-1])a?l===o&&(a=!1,l=""):(a=!0,l=o);else if(!a){if("<([{".includes(o))n++;else if(">)]}".includes(o))n=Math.max(0,n-1);else if(o===t&&0===n){s.push(r),r="";continue}}r+=o}return r&&s.push(r),s}let o=e=>"number"==typeof e&&!Number.isNaN(e);function c(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"{",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"}";if(e[t]!==s)return;let a=0,l=t,r=!1,i=null;for(;l<e.length;){let o=e[l];if(r){if("\\"===o){l+=2;continue}o===i&&(r=!1,i=null),l++;continue}if('"'===o||"'"===o){r=!0,i=o,l++;continue}if(o===s)a++;else if(o===n&&0==--a)return{content:e.slice(t+1,l),end:l};l++}}function u(e){let t=0,s=0;for(let n=0;n<e.length;n++){let a=e[n];if("("===a)t++;else if(")"===a)t=Math.max(0,t-1);else if("{"===a)s++;else if("}"===a)s=Math.max(0,s-1);else if(";"===a&&0===t&&0===s)return n}return -1}function m(e){var t,s;let n={raw:[]};n.raw=e.match(/@\w+(?:\([^)]*\))?/g)||[],/@(?:[\w.]+)?Nullable\b/.test(e)&&(n.nullable=!0),/@(?:[\w.]+)?NotNull\b|@(?:[\w.]+)?Nonnull\b/.test(e)&&(n.notNull=!0);let a=/@(?:[\w.]+)?Size\s*\(\s*(?:min\s*=\s*(\d+))?\s*(?:,\s*)?(?:max\s*=\s*(\d+))?\s*\)/.exec(e);a&&(n.size={min:a[1]?Number(a[1]):void 0,max:a[2]?Number(a[2]):void 0});let l=/@(?:[\w.]+)?Min\s*\(\s*(?:value\s*=\s*)?(-?\d+)\s*\)/.exec(e);l&&(n.min=Number(l[1]));let r=/@(?:[\w.]+)?Max\s*\(\s*(?:value\s*=\s*)?(-?\d+)\s*\)/.exec(e);r&&(n.max=Number(r[1]));let i=/@(?:[\w.]+)?Pattern\s*\(\s*regexp\s*=\s*"([\s\S]*?)"\s*\)/.exec(e);i&&(n.pattern=i[1]);let o=/@(?:[\w.]+)?JsonProperty\s*\(\s*"([^"]+)"\s*\)/.exec(e),c=/@(?:[\w.]+)?JsonProperty\s*\(\s*value\s*=\s*"([^"]+)"\s*\)/.exec(e);o&&(n.jsonProperty=o[1]),c&&(n.jsonProperty=c[1]),/@(?:[\w.]+)?Email\b/.test(e)&&(n.email=!0),/@(?:[\w.]+)?NotBlank\b|@(?:[\w.]+)?NotEmpty\b/.test(e)&&(n.notBlankOrEmpty=!0),/@(?:[\w.]+)?Positive\b/.test(e)&&(n.positive=!0),/@(?:[\w.]+)?Negative\b/.test(e)&&(n.negative=!0);let u=null==(t=/@(?:[\w.]+)?DecimalMin\s*\(\s*([^)]*)\)/.exec(e))?void 0:t[1];if(u){let e=/value\s*=\s*"([^"]+)"/.exec(u)||/"([^"]+)"/.exec(u),t=/inclusive\s*=\s*(true|false)/.exec(u);e&&(n.decimalMin={valueText:e[1],inclusive:!t||"false"!==t[1]})}let m=null==(s=/@(?:[\w.]+)?DecimalMax\s*\(\s*([^)]*)\)/.exec(e))?void 0:s[1];if(m){let e=/value\s*=\s*"([^"]+)"/.exec(m)||/"([^"]+)"/.exec(m),t=/inclusive\s*=\s*(true|false)/.exec(m);e&&(n.decimalMax={valueText:e[1],inclusive:!t||"false"!==t[1]})}return n}function p(e){let t=e.replace(/@field:/g,"@").replace(/@get:/g,"@"),s=m(t),n=/@(?:[\w.]+)?Json\s*\(\s*name\s*=\s*"([^"]+)"\s*\)/.exec(t);return n&&(s.jsonProperty=n[1]),s}function d(e,t){let s=e.indexOf("{",t);if(s<0)return null;let n=c(e,s,"{","}");return n?n.content:null}function f(e){let t=[];for(let s of i(e,",")){let e=s.trim();if(!e)continue;let n=/^(\s*(?:@\w+(?::\w+)?(?:\([^)]*\))?\s*)*)/.exec(e),a=n?n[1]:"";e=e.slice(a.length).trim();let l=/^(?:val|var)\s+([A-Za-z_]\w*)\s*:\s*([\s\S]+?)\s*(?:=\s*[\s\S]+)?$/.exec(e);if(!l)continue;let r=l[1],i=l[2].trim(),o=p(a),c=/\?$/.test(i)||!!o.nullable;i=i.replace(/\?$/,""),t.push({name:r,emitName:o.jsonProperty||r,type:i,optional:c,ann:o})}return t}function h(e){let t,s=[],n=/((?:@\w+(?::\w+)?(?:\([^)]*\))?\s*)*)(?:public|private|protected)?\s*(?:override\s+)?(?:lateinit\s+)?(?:val|var)\s+([A-Za-z_]\w*)\s*:\s*([^=\n]+)(?:=.*)?/g;for(;t=n.exec(e);){let e=p(t[1]||""),n=t[2],a=(t[3]||"").trim(),l=/\?$/.test(a)||!!e.nullable,r=a.replace(/\?$/,"");s.push({name:n,emitName:e.jsonProperty||n,type:r,optional:l,ann:e})}return s}let x=e=>{var t;return(null==(t=e.items)?void 0:t.length)?(0,n.jsxs)("div",{className:"diag",children:[(0,n.jsxs)("div",{className:"diag-title",children:["Diagnostics (",e.items.length,")"]}),(0,n.jsx)("ul",{children:e.items.map((e,t)=>{var s,a,l,r;return(0,n.jsxs)("li",{className:`diag-item ${e.level}`,children:[(0,n.jsx)("div",{className:"diag-msg",children:e.message}),((null==(s=e.where)?void 0:s.class)||(null==(a=e.where)?void 0:a.field))&&(0,n.jsxs)("div",{className:"diag-where",children:[(null==(l=e.where)?void 0:l.class)?`class: ${e.where.class}`:"",(null==(r=e.where)?void 0:r.field)?`, field: ${e.where.field}`:""]})]},t)})})]}):null},v=new class{success(e){r.oR.success(e)}error(e){r.oR.error(e)}warning(e){r.oR.warning(e)}info(e){r.oR.info(e)}};var g=s(304);let b=e=>(0,n.jsx)("div",{className:"pane monaco",children:(0,n.jsx)(g.KE,{height:"60vh",theme:"vs-dark",defaultLanguage:e.language,language:e.language,value:e.value,onChange:t=>{var s;return null==(s=e.onChange)?void 0:s.call(e,t??"")},onMount:(t,s)=>{var n;t.updateOptions({minimap:{enabled:!0},fontSize:13,scrollBeyondLastLine:!1,smoothScrolling:!0,automaticLayout:!0,tabSize:2,wordWrap:"on"}),null==(n=e.onReady)||n.call(e,t,s)},options:{readOnly:!!e.readOnly,renderWhitespace:"selection",lineNumbers:"on"}})});function w(e){return/\bdata\s+class\b/.test(e)||/\b(val|var)\s+\w+\s*:/.test(e)?"kotlin":"java"}let $=()=>{let[e,t]=a.useState(z),[s,l]=a.useState(""),[r,p]=a.useState([]),[g,$]=a.useState(w(z)),j=a.useRef(null),S=a.useRef(null),N=a.useRef(null),k=a.useRef(null),M=a.useCallback(()=>{let t=function(e){let t=e.replace(/\/\/[^\n]*\n/g,"\n").replace(/\/\*[\s\S]*?\*\//g,"").replace(/^(import\s+[^;]+)$/gm,"$1;"),s=/\benum\s+class\b/.test(t)||/\bdata\s+class\b/.test(t)||/\b(val|var)\s+\w+\s*:/.test(t)?"kotlin":"java",n="kotlin"===s?function(e){let t,s=[],n=new Set,a=/data\s+class\s+([A-Za-z_]\w*)\s*\(/g;for(;t=a.exec(e);){let a=t[1],l=e.indexOf("(",t.index),r=c(e,l,"(",")");if(!r)continue;let i=f(r.content),o=d(e,r.end+1);o&&i.push(...h(o)),s.push({name:a,fields:i}),n.add(a)}let l=/(^|\s)class\s+([A-Za-z_]\w*)/g;for(;t=l.exec(e);){let a=t[2];if(n.has(a))continue;let l=t.index+t[0].length;for(;/\s/.test(e[l]||"");)l++;let r=[];if("("===e[l]){let t=c(e,l,"(",")");t&&(r.push(...f(t.content)),l=t.end+1)}let i=d(e,l);i&&r.push(...h(i)),s.push({name:a,fields:r})}var r=s;let i=new Map;for(let e of r){i.has(e.name)||i.set(e.name,{name:e.name,fields:[]});let t=i.get(e.name),s=new Set(t.fields.map(e=>e.emitName||e.name));for(let n of e.fields){let e=n.emitName||n.name;s.has(e)||(s.add(e),t.fields.push(n))}}return[...i.values()]}(t):function(e){let t,s=[],n=/((?:\s*@[\w.]+(?:\([^)]*\))?\s*)*)(?:public|protected|private|abstract|final|\s)*class\s+([A-Za-z_]\w*)/g;for(;t=n.exec(e);){let a=t[2],l=e.indexOf("{",n.lastIndex);if(l<0)continue;let r=c(e,l,"{","}");if(!r)continue;let o=function(e){let t,s=[],n=/((?:\s*@[\w.]+(?:\([^)]*\))?\s*)*)([\s\S]*?);/g;for(;t=n.exec(e);){let e=t[1]||"",n=(t[2]||"").trim();if(!n||/\b(class|interface|enum)\b/.test(n)||/\b\w+\s*\(/.test(n))continue;let a=i(n=n.replace(/\b(public|private|protected|static|final|transient|volatile)\b/g,"").trim(),",").map(e=>e.trim()).filter(Boolean);if(0===a.length)continue;let l=a[0].replace(/\s*[A-Za-z_]\w*(?:\s*\[.*?\])?(?:\s*=.*)?$/,"").trim(),r=m(e);for(let e of a){let t=/([A-Za-z_]\w*)\s*((?:\[\s*\]\s*)*)(?:=\s*[^,]+)?\s*$/.exec(e);if(!t)continue;let n=t[1],a=(t[2].match(/\[\s*\]/g)||[]).length,i=l;for(let e=0;e<a;e++)i+="[]";let o=/Optional\s*<.+>/.test(l)||!!r.nullable;s.push({name:n,emitName:r.jsonProperty||n,type:i,optional:o,ann:r})}}return s}(r.content);s.push({name:a,fields:o}),n.lastIndex=r.end+1}return s}(t),a="kotlin"===s?function(e){let t,s=[],n=/enum\s+class\s+([A-Za-z_]\w*)\s*\{/g;for(;t=n.exec(e);){let n=t[1],a=e.indexOf("{",t.index),l=c(e,a,"{","}");if(!l)continue;let r=l.content,o=u(r);o>=0&&(r=r.slice(0,o));let m=i(r,","),p=[];for(let e of m){let t=e.trim();if(!t)continue;let s=/^([A-Za-z_]\w*)/.exec(t);s&&p.push(s[1])}p.length&&s.push({name:n,values:p})}return s}(t):function(e){let t,s=[],n=/(?:public\s+|protected\s+|private\s+)?enum\s+([A-Za-z_]\w*)\s*\{/g;for(;t=n.exec(e);){let n=t[1],a=e.indexOf("{",t.index),l=c(e,a,"{","}");if(!l)continue;let r=l.content,o=u(r);o>=0&&(r=r.slice(0,o));let m=i(r,","),p=[];for(let e of m){let t=e.trim();if(!t)continue;let s=/^([A-Za-z_]\w*)/.exec(t);s&&p.push(s[1])}p.length&&s.push({name:n,values:p})}return s}(t),l={classes:new Set(n.map(e=>e.name)),enums:new Set(a.map(e=>e.name))},{code:r,diagnostics:p}=function(e,t,s){let n=[],a=[];for(let e of(a.push("import { z } from 'zod'",""),s)){let t=e.values.map(e=>`'${e.replace(/'/g,"\\'")}'`).join(", ");a.push(`// ${e.name} (enum)`),a.push(`export const ${e.name}Schema = z.enum([${t}])`),a.push(`export type ${e.name} = z.infer<typeof ${e.name}Schema>`,"")}for(let s of e){a.push(`// ${s.name}`);let e=[];for(let a of s.fields){var l,r,c;let u=function e(t,s){var n,a;let l,r,o,c=[],u=t.trim().replace(/\s+/g," ");u=u.replace(/^final\s+/,"");let m=/^Array\s*<([\s\S]+)>$/.exec(u);m&&(u=`${m[1].trim()}[]`),u=u.replace(/^MutableList</,"List<").replace(/^MutableSet</,"Set<").replace(/^MutableMap</,"Map<");let p=/^Optional\s*<([\s\S]+)>$/.exec(u);p&&(u=p[1].trim());let d=0;for(;/\[\s*\]$/.test(u);)d++,u=u.replace(/\[\s*\]$/,"").trim();let f=(n=u,(r=/^(?:List|java\.util\.List)\s*<([\s\S]+)>\s*$/.exec(n))?r[1].trim():null),h=(a=u,(o=/^(?:Set|java\.util\.Set)\s*<([\s\S]+)>\s*$/.exec(a))?o[1].trim():null),x=function(e){let t=/^(?:Map|java\.util\.Map)\s*<([\s\S]+)>\s*$/.exec(e);if(!t)return null;let s=i(t[1],",").map(e=>e.trim());return 2!==s.length?null:[s[0],s[1]]}(u);if(f){let t=e(f,s);c.push(...t.diagnostics),l=`z.array(${t.expr})`}else if(h){let t=e(h,s);c.push(...t.diagnostics),l=`z.array(${t.expr})`}else if(x){let t=e(x[0],s),n=e(x[1],s);c.push(...t.diagnostics,...n.diagnostics);let a=t.expr.startsWith("z.string()")||/^[A-Za-z_]\w*Schema$/.test(t.expr);l=a?`z.record(z.string(), ${n.expr})`:"z.record(z.string(), z.unknown())",a||c.push({level:"warn",message:`Map key '${x[0]}' not supported â†’ string keys used`})}else l=function(e){let t=e.replace(/^([A-Za-z_$][\w$]*\.)+/,"");if(s.enums.has(t))return{expr:`${t}Schema`};switch(t){case"String":return{expr:"z.string()"};case"byte":case"Byte":case"short":case"Short":case"int":case"Int":case"Integer":return{expr:"z.number().int()"};case"long":case"Long":case"float":case"Float":case"double":case"Double":return{expr:"z.number()"};case"boolean":case"Boolean":return{expr:"z.boolean()"};case"char":case"Character":case"Char":return{expr:"z.string().length(1)"};case"ByteArray":return{expr:"z.array(z.number().int())"}}return"java.util.Date"===e||/^java\.time\./.test(e)||["Instant","LocalDate","LocalTime","LocalDateTime","OffsetDateTime","ZonedDateTime"].includes(e)?{expr:"z.string()"}:s.classes.has(t)?{expr:`z.lazy(() => ${t}Schema)`,ref:t}:(c.push({level:"warn",message:`Unknown type '${e}' â†’ z.unknown()`}),{expr:"z.unknown()"})}(u).expr;for(let e=0;e<d;e++)l=`z.array(${l})`;return{expr:l,diagnostics:c}}(a.type,t);u.diagnostics.forEach(e=>n.push({...e,where:{class:s.name,field:a.name}}));let m=u.expr;r=m,(c=a.ann).pattern&&r.startsWith("z.string()")&&(r=`${r}.regex(${function(e){let t=e;for(let e=0;e<3;e++)t=t.replace(/\\\\/g,"\\");return t=(t=t.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")).replace(/\//g,"\\/"),`/${t}/`}(c.pattern)})`),c.size&&(r.startsWith("z.string()")||r.startsWith("z.array("))&&(o(c.size.min)&&(r=`${r}.min(${c.size.min})`),o(c.size.max)&&(r=`${r}.max(${c.size.max})`)),o(c.min)&&r.startsWith("z.number()")&&(r=`${r}.min(${c.min})`),o(c.max)&&r.startsWith("z.number()")&&(r=`${r}.max(${c.max})`),c.email&&r.startsWith("z.string()")&&(r=`${r}.email()`),c.notBlankOrEmpty&&r.startsWith("z.string()")&&(r=`${r}.min(1)`),c.positive&&r.startsWith("z.number()")&&(r=`${r}.positive()`),c.negative&&r.startsWith("z.number()")&&(r=`${r}.negative()`),c.decimalMin&&r.startsWith("z.number()")&&(r=c.decimalMin.inclusive?`${r}.min(${c.decimalMin.valueText})`:`${r}.min(${c.decimalMin.valueText}, { inclusive: false })`),c.decimalMax&&r.startsWith("z.number()")&&(r=c.decimalMax.inclusive?`${r}.max(${c.decimalMax.valueText})`:`${r}.max(${c.decimalMax.valueText}, { inclusive: false })`),m=r;let p=/\.optional\(\)/.test(m);(a.optional||a.ann.nullable)&&!p&&(m=`${m}.optional()`),m=m.replace(/(\.optional\(\))+/,".optional()"),e.push(`  ${(l=a.emitName,/^[A-Za-z_]\w*$/.test(l)?l:`'${l.replace(/'/g,"\\'")}'`)}: ${m}`)}a.push(`export const ${s.name}Schema = z.object({`),a.push(e.join(",\n")),a.push("})"),a.push(`export type ${s.name} = z.infer<typeof ${s.name}Schema>`,"")}return{code:a.join("\n"),diagnostics:n}}(n,l,a);return{code:r,diagnostics:p}}(e);if(l(t.code),p(t.diagnostics),N.current){var s,n;(null==(s=(n=N.current).getModel)?void 0:s.call(n))&&N.current.setValue(t.code)}},[e,l,p]);a.useEffect(()=>{M()},[M]);let C=a.useCallback(()=>{l(s),N.current&&N.current.setValue(s)},[s]),O=async()=>{try{await navigator.clipboard.writeText(s),v.success("Copied to clipboard")}catch{v.error("Failed to copy to clipboard")}},A=a.useCallback((e,t)=>{e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.Enter,()=>M()),e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyB,()=>C())},[C,M]);return(0,n.jsxs)("div",{className:"editor",children:[(0,n.jsxs)("div",{className:"toolbar",children:[(0,n.jsxs)("div",{className:"left",children:[(0,n.jsx)("button",{onClick:()=>{t(z),$("java"),setTimeout(M,0)},children:"Java example"}),(0,n.jsx)("button",{onClick:()=>{t(y),$("kotlin"),setTimeout(M,0)},children:"Kotlin example"}),(0,n.jsxs)("span",{className:"badge",children:["detekov\xe1no: ","kotlin"===g?"Kotlin":"Java"]})]}),(0,n.jsxs)("div",{className:"right",children:[(0,n.jsx)("button",{onClick:M,title:"Ctrl/Cmd + Enter",children:"Parse"}),(0,n.jsx)("button",{onClick:O,children:"Copy"})]})]}),(0,n.jsxs)("div",{className:"panes",children:[(0,n.jsx)(b,{value:e,language:"java",onChange:e=>{t(e),$(w(e))},onReady:(e,t)=>{j.current=e,S.current=t,A(e,t)}}),(0,n.jsx)(b,{value:s,language:"typescript",readOnly:!0,onReady:(e,t)=>{N.current=e,k.current=t,A(e,t)}})]}),(0,n.jsx)(x,{items:r})]})},z=`
public class Product {
  @NotNull
  @Size(min = 3, max = 50)
  @JsonProperty("id")
  public String productId;

  public Integer stock;
  @Pattern(regexp = "^[A-Z0-9_-]+$")
  public String sku;
  public boolean active;
}
`.trim(),y=`
import com.squareup.moshi.Json

data class User(
  @Json(name = "id") val userId: String,
  val age: Int?,
  val tags: List<String>,
  val createdAt: java.time.Instant
)
`.trim(),j=document.getElementById("root");j&&l.createRoot(j).render((0,n.jsxs)(a.StrictMode,{children:[(0,n.jsx)(r.N9,{position:"bottom-right",theme:"dark",hideProgressBar:!0}),(0,n.jsx)(()=>(0,n.jsxs)("main",{className:"main",children:[(0,n.jsx)("h1",{children:"Class â†’ Zod v4"}),(0,n.jsx)("p",{className:"subtitle",children:"Java & Kotlin DTO â†’ Zod v4 schemas (browser-only)"}),(0,n.jsx)($,{})]}),{})]}))}},l={};function r(e){var t=l[e];if(void 0!==t)return t.exports;var s=l[e]={exports:{}};return a[e](s,s.exports,r),s.exports}r.m=a,r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e=[],r.O=(t,s,n,a)=>{if(s){a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[s,n,a];return}for(var i=1/0,l=0;l<e.length;l++){for(var[s,n,a]=e[l],o=!0,c=0;c<s.length;c++)(!1&a||i>=a)&&Object.keys(r.O).every(e=>r.O[e](s[c]))?s.splice(c--,1):(o=!1,a<i&&(i=a));if(o){e.splice(l--,1);var u=n();void 0!==u&&(t=u)}}return t},t={410:0},r.O.j=e=>0===t[e],s=(e,s)=>{var n,a,[l,i,o]=s,c=0;if(l.some(e=>0!==t[e])){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(o)var u=o(r)}for(e&&e(s);c<l.length;c++)a=l[c],r.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return r.O(u)},(n=self.webpackChunkclass2zod=self.webpackChunkclass2zod||[]).forEach(s.bind(null,0)),n.push=s.bind(null,n.push.bind(n));var i=r.O(void 0,["783","754"],function(){return r(204)});i=r.O(i)})();